## Гиренко Дмитрий Владимирович
## Компьютерная графика

## Тема: Введение в компьютерную графику ч.1

#### 1. Области применения КГ.

** КГ ** - область информатики, в сферу интересов которой входят все аспекты формирования изображения.

**Области применения:**
1. моделирование
2. проектирование
3. GUI
4. представление

```
CLI - comand line interface <-> GUI
```
#### 2. Изображение и его виды.
**Виды изображений:**
* реалистичное или физическое (глаз, фотоаппарат)
* синтезируемое - продукт КГ

**Особенности формирования:**
1. физическое: объект, субъект и соответствие
2. синтезируемое:
    1. объект - то, что моделируем, сцена
    2. виртуальная камера (некий посредник)
    3. источники света добавляются в сцену (отдельный программный объект)

#### 3. Графическая система.

**Система КГ** - вычислительная система общего назначения (с расширенной функциональностью отдельных компонент).

![](/home/alina/Documents/Комп.граф/КГ.png)

**Буфер кадра и пиксели:**
Все современные графические системы использую растровый способ создания изображения:
  * изображение - массив точек (изображение дискретно);
  точки называются пикселями (px);
  растр - это массив точек;
  * каждый пиксель имеет четко определенное положение на экране (пиксели локализованы)
  * массив кодов зацветки пикселей хранится в буфере кадров (frame buffer)
  * под код буфера кажда может выделяться отдельная память (VRAM || DRAM)

**Характеристики буфера кадра:**
1. глубина (depth) - количество бит, выделенных отдельному коду зацветки пикселя (как много информации о цвете пиксель может хранить)

1 бит  | 2 цвета
--|--
8 бит  | 2^8 цветов
16 бит  |  2^16 цветов
 > 24 бит  |  true-color
2. разрешающая способность (разрешение)

В простых графических системах используется один процессор, на который возлагаются все **задачи КГ:**
1. формирование примитивов (точки, линии, треугольники, ...)
2. проецирование (изначально x,y,z -> проецируется на плоский экран x,y)
3. растровое преобразование (перевод в коде зацветки пикселя)

Для ускорения процесса подзадачи 1-3 могут выносится в отдельный процессор.

## Тема: Введение в компьютерную графику ч. 2

#### 1. Интерфейс прикладного программиста.

![](/home/alina/Documents/Комп.граф/API.png)

**Интерфейс прикладного программиста (API)** - множество функций, которые образуют графическую библиотеку; спецификация этих функций - API (интерфейс между прикладной программой и графической системой).
Графичекий API - наш интерес.

**API должен обеспечивать работу с:**
- объектами
- наблюдателями (виртуальная камера)
- источники света
- материал объекта

**Характеристики графического API:**
1. Объекты описываются массивами вершин. Вершина - абстрактное вспомогальное понятие. Существует набор примитивов:
    - точки
    - отрезки
    - треугольники
    - многоугольники
    - сферы
    - и т.д.
2. Повороты, перемещение, масштабирование.
3. Источники света. Доступны разные типы - точечный, прожектор и фоновый. Существует возможность регулирования оптических свойств, яркости, интенсивности.
4. Существует возможность задания глянцевой или матовой поверхности, цвета и степени неровности.

**Парадигра "моделирования - тонирования".** Существует две концепции формирования изображения:
1. Модель минтезируемой камеры.
Сразу формируется готовое изображение, смоделированное и в цвете.

2. Моделирование-тонирование.
Сначала моделируется  бесцветная сцена, а затем тонируется *(rendering)* (связка через промежуточные файлы)

#### 2. Архитектура графической системы.

0. Архитектура Фон-Неймана. Процессор - многофункционален.

1. Дисплейный процессор - отдельный процессор в составе дисплея. Задачи:

    - регенирация изображения;

    - формирование примитивов;

2. Конвейерная архитектура (СБПС - плата). В данной архитектуре формирование изображения разбивается на четыре этапа:

    1. геометрические преобразования - формирование *представления объектов* сцены в разных системах координа; используется аппарат линейной алгебры (матричной математики)

    2. отсечение (clipping) - процесс происходит с использованием отсекающей прямоугольной рамки на плоскости проекции;
        1. объекты, проекции которых попадают во внутреннюю часть отсекающей рамки - учавствуют в формировании изображения;
        2. объекты, которые пересекают отсекающую рамку - учавствуют частично;
        3. остальные отсекаются

    3. проективные преобразования - переход с объемной сцены в плоскую, виды:
        - перспективная;
        - ортогональная;
        - косоугольная

    4. растровые преобразования - преобразования описания двумерных объектов в коды зацветки пикселей **(px)** в буфере кадра.

**Производительность графического конвейера:**

В рассматриваемой структуре обработки графической информации исользуются операции двух типов. На начальной стадии - операции с координатами вершин - числа с плавающей точкой. Все операции после растрового преобразования требуют выполнения побитовых операций на уровне содержимого буфера кадра.

Произведение графического конвейера = производительность при работе с плавающей точкой + производительность при побитоых операциях

Для оптимизации эти два процесса разносятся по разным платам.

## Тема: Начало OpenGL

#### 1. Прикладной интерфейс OpenGL (OGL)

![](IOGL.png)

Категории функций OGL:
1. функции работы с примитивами (primitive functions)
2. функции работы с атрибутами (atribute functions) (изменить цвет, прозрачность)
3. функции визуализации (view functions) (как будет отображаться сцена)
4. функции геометрических проеобразований (transform functions)
5. функции ввода графической интформации (input functions) (в плане назначения)
6. управляющие функции (control functions)

Интерфейсы OGL:
- функции предворяются префиксом 'gl'
- GL - основная библиотека (база)
- дополнительные библиотеки:
    - GLU - предназначена для работы с формированием сложных объектов
    - GLUT - набор функция для работы с окнами
- для читабельности программы введено использование маркосов с профексом 'GL_' (в .h файлах)

Атрибуты OpenGL:
![](GL.png)

#### 2. OpenGL как конечный автомат

OGL работает по принципу **конечного автомата**. Пользователь переводит его в различные состояния или режимы, в котором он останется до момента следующего изменения. Многие параметры состояния связаны с режимами, которые включаются и выключаются командами:
- glEnabel()
- glDisable()
    - Компонент состояния
    - Состояние - набор компонентов состояний
    - Режим

#### 3. Конвейер OpenGL

![](Conveyor.png)

*Список отображения (дисплейный список):*
- два варианта хранения данных - список отображения и непосредственный режим (данные как есть);
- информация обрабатывается точно так же, как в непосредственном режиме;
- актуальны при использовании больших наборов данных.

*Блок оценки (вычислитель):*
- все геометрические примитивы описываются вершинами;
- параметрические кривые/поверхности могут быть описаны контрольными точками и многочленами (базисными функциями);
- генерирует вершины по заданным базисным функциям и контрольными точкам.

*Операции с вершинами:*
- преобразуют вершины в примитивы;
- проецирование сцены;
- преобразование координат текстур;
- вычисление цвета при использовании освещения.

*Компоновка примитивов:*
- отсечение;
- компоновка примитивов.

*Операции с пикселями:*
- растровые обрабатываются параллельно вершинам;
- пиксели из системной памяти распаковываются в некоторое количество компонентов, данные масштабируются, трансформируются, и обрабатываются как пиксельные карты;
- пиксельные карты или накапливаются в памяти текстур, или отправляются на растеризацию;
- если данные забираются из буфера кадра, то выполняется ряд операций по пересылке этих пикселей;
- данные из буфера кадра записываются в системную память.

*Компоновка текстур:*
- если текстур несколько, то они помещаются в текстурные объекты.

*Операции с пикселями, Растеризация:*
- преобразование векторных и растровых данных в фрагменты.

*Операции с фрагментами:*
- текстурирование, тексели;
- каждый тексель накладывается на соответсвующий фрагмент;
- специфические функции (прозрачность, эффекты);
- фрагменты записываются в буфер кадра;
- растровые данные преобразуются в коды засветки пикселей.
